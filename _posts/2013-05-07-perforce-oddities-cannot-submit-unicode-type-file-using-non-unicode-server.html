---
layout: post
status: publish
published: true
title: 'Perforce Oddities: cannot submit unicode type file using non-unicode server'
author:
  display_name: Rob Petti
  login: rpetti
  email: rob.petti@gmail.com
  url: http://www.robpetti.com
author_login: rpetti
author_email: rob.petti@gmail.com
author_url: http://www.robpetti.com
wordpress_id: 145
wordpress_url: http://robpetti.com/?p=145
date: '2013-05-07 14:30:50 -0600'
date_gmt: '2013-05-07 18:30:50 -0600'
categories:
- Technical
- Perforce
tags: []
comments: []
---
<p>Ran into this little gem today... I've got a project that I'm currently trying to branch. It's a very simple integration operation from one location to another, nothing crazy. Of course Perforce needs to make it as complicated as possible by throwing me this error for a couple of our files:</p>
<p><code>cannot submit unicode type file using non-unicode server<&#47;code></p>
<p>Now, this is incredibly nonsensical. I'm integrating an <i>already submitted<&#47;i> file from one location to another, and checking it in. Why does Perforce reject it if it's already been submitted successfully once before?</p>
<p>It turns out that the way perforce handles unicode filetypes changed at some point. Before this change, you could submit unicode files without any problems. After this change, your server needs to be reconfigured as a 'unicode server' in order to check in unicode files, even though it's clearly handling already checked-in files just fine. To me, this seems like an artificial restriction, but I digress.</p>
<p>To resolve this, you just need to reopen the files as text, and resubmit them.</p>
<pre class="code">
$ p4 reopen -t text <FILE><br />
<&#47;pre></p>
<p>After that, you can work on the files again as normal. I'm not sure what effect this has on the encoding of the files themselves, so as always, YMMV, but at least you'll be able to get on with your life.</p>
